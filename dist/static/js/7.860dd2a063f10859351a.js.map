{"version":3,"sources":["webpack:///static/js/7.860dd2a063f10859351a.js","webpack:///./src/pages/login/accessToken.vue","webpack:///./src/pages/login/accessToken.vue?9bb8","webpack:///./src/assets/scriptes/utils.js","webpack:///accessToken.vue"],"names":["webpackJsonp","617","module","exports","__webpack_require__","Component","643","render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","_v","655","__webpack_exports__","parseUrlParam","key","reg","RegExp","r","window","location","search","substr","match","662","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__assets_scriptes_app__","__WEBPACK_IMPORTED_MODULE_1__assets_scriptes_utils__","__WEBPACK_IMPORTED_MODULE_2__vuex_types__","name","created","accessTokenCode","accessToken","methods","_this","$http","post","$basehost","client_id","appId","client_secret","appSecret","code","then","authToken","console","log","$store","commit","oauth","updateAuthToken","getCurUser","_this2","get","$apihost","user","updateCurUser","redirect","redirectUri","$route","query","undefined","$router","replace"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GCHjC,GAAAC,GAAAD,EAAA,KAEAA,EAAA,KAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAE,EAAAF,SDUMG,IACA,SAAUJ,EAAQC,GEtBxBD,EAAAC,SAAgBI,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,cAA0BH,GAAAI,MAAAC,EAC1E,OAAAL,GAAAM,GAAA,IACCC,iBAAA,WAA+B,GAAAP,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CACvE,OAAAG,GAAA,OACAG,YAAA,8BACGH,EAAA,OACHG,YAAA,yCACGH,EAAA,KACHG,YAAA,eACGR,EAAAS,GAAA,+BF6BGC,IACA,SAAUhB,EAAQiB,EAAqBf,GAE7C,YGtCAe,GAAA,GAKEC,cAAe,SAAUC,GACvB,GAAMC,GAAM,GAAIC,QAAO,QAAUF,EAAM,gBAAiB,KAClDG,EAAIC,OAAOC,SAASC,OAAOC,OAAO,GAAGC,MAAMP,EACjD,OAAU,QAANE,EACKA,EAAE,GAEJ,MH0CLM,IACA,SAAU5B,EAAQiB,EAAqBf,GAE7C,YACA2B,QAAOC,eAAeb,EAAqB,cAAgBc,OAAO,GAC7C,IAAIC,GAAqD9B,EAAoB,KACzE+B,EAAuD/B,EAAoB,KAC3EgC,EAA4ChC,EAAoB,GAO5De,GAA6B,SACxDkB,KIxDF,eJyDEC,QAAS,WACP,GAAIC,GAAkBJ,EAAsE,EAAEf,cIpDlG,OJuDIX,MAAK+B,YItDTD,IJyDEE,SACED,YAAa,SAAqBD,GIvDtC,GAAAG,GAAAjC,IJ0DMA,MAAKkC,MAAMC,KAAKnC,KAAKoC,UAAY,uBAC/BC,UAAaZ,EAAoE,EIzDzFa,MJ0DQC,cAAiBd,EAAoE,EIzD7Fe,UJ0DQC,KIxDR,kDAJAC,KAAA,SAAAC,GJ8DQC,QAAQC,IIxDhBF,GJyDQV,EAAMa,OAAOC,OAAOpB,EAA2D,EAAEqB,MAAMC,gBIvD/FN,GJyDQV,EIxDRiB,gBJ2DIA,WAAY,WIvDhB,GAAAC,GAAAnD,IJ0DMA,MAAKkC,MAAMkB,IAAIpD,KAAKqD,SIzD1B,SAAAX,KAAA,SAAAY,GJ0DQH,EAAOL,OAAOC,OAAOpB,EAA2D,EAAEqB,MAAMO,cIxDhGD,GJyDQH,EIxDRK,cJ2DIA,SAAU,WACR,GAAIC,GAAczD,KAAK0D,OAAOC,MItDpCH,aJuD0BI,KAAhBH,OAAoD,KAAhBA,EACtCzD,KAAK6D,QAAQC,QItDrBL,GJwDQzD,KAAK6D,QAAQC,QItDrB","file":"static/js/7.860dd2a063f10859351a.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 617:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(226)(\n  /* script */\n  __webpack_require__(662),\n  /* template */\n  __webpack_require__(643),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 643:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _vm._m(0)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"full-height valign-center\"\n  }, [_c('div', {\n    staticClass: \"align-center block-center font-light\"\n  }, [_c('p', {\n    staticClass: \"margin-top\"\n  }, [_vm._v(\"正在处理授权登录信息，请稍候...\")])])])\n}]}\n\n/***/ }),\n\n/***/ 655:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  parseUrlParam: function parseUrlParam(key) {\n    var reg = new RegExp(\"(^|&)\" + key + \"=([^&]*)(&|$)\", \"i\");\n    var r = window.location.search.substr(1).match(reg);\n    if (r !== null) {\n      return r[2];\n    }\n    return \"\";\n  }\n});\n\n/***/ }),\n\n/***/ 662:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__assets_scriptes_app__ = __webpack_require__(230);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__assets_scriptes_utils__ = __webpack_require__(655);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vuex_types__ = __webpack_require__(60);\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: \"access-token\",\n  created: function created() {\n    var accessTokenCode = __WEBPACK_IMPORTED_MODULE_1__assets_scriptes_utils__[\"a\" /* default */].parseUrlParam(\"code\");\n\n\n    this.accessToken(accessTokenCode);\n  },\n\n  methods: {\n    accessToken: function accessToken(accessTokenCode) {\n      var _this = this;\n\n      this.$http.post(this.$basehost + \"/oauth/access_token\", {\n        \"client_id\": __WEBPACK_IMPORTED_MODULE_0__assets_scriptes_app__[\"a\" /* default */].appId,\n        \"client_secret\": __WEBPACK_IMPORTED_MODULE_0__assets_scriptes_app__[\"a\" /* default */].appSecret,\n        \"code\": \"http://localhost:8085/access/token?redirect=/\"\n      }).then(function (authToken) {\n        console.log(authToken);\n        _this.$store.commit(__WEBPACK_IMPORTED_MODULE_2__vuex_types__[\"a\" /* default */].oauth.updateAuthToken, authToken);\n\n        _this.getCurUser();\n      });\n    },\n    getCurUser: function getCurUser() {\n      var _this2 = this;\n\n      this.$http.get(this.$apihost + \"/user\").then(function (user) {\n        _this2.$store.commit(__WEBPACK_IMPORTED_MODULE_2__vuex_types__[\"a\" /* default */].oauth.updateCurUser, user);\n        _this2.redirect();\n      });\n    },\n    redirect: function redirect() {\n      var redirectUri = this.$route.query.redirect;\n      if (redirectUri !== undefined && typeof redirectUri !== 'undefined') {\n        this.$router.replace(redirectUri);\n      } else {\n        this.$router.replace(\"/\");\n      }\n    }\n  }\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.860dd2a063f10859351a.js","var Component = require(\"!../../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./accessToken.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40d8ca72\\\"}!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./accessToken.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/accessToken.vue\n// module id = 617\n// module chunks = 7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _vm._m(0)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"full-height valign-center\"\n  }, [_c('div', {\n    staticClass: \"align-center block-center font-light\"\n  }, [_c('p', {\n    staticClass: \"margin-top\"\n  }, [_vm._v(\"正在处理授权登录信息，请稍候...\")])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-40d8ca72\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/accessToken.vue\n// module id = 643\n// module chunks = 7","/**\n * Created by lyc on 2017/6/19.\n */\nexport default {\n  /**\n   * 解析浏览器URL上的参数\n   * @param key 参数名称s\n   */\n  parseUrlParam: function (key) {\n    const reg = new RegExp(\"(^|&)\" + key + \"=([^&]*)(&|$)\", \"i\")\n    const r = window.location.search.substr(1).match(reg)\n    if (r !== null) {\n      return r[2]\n    }\n    return \"\"\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/scriptes/utils.js","<template>\n  <div class=\"full-height valign-center\">\n    <div class=\"align-center block-center font-light\">\n      <p class=\"margin-top\">正在处理授权登录信息，请稍候...</p>\n    </div>\n  </div>\n</template>\n\n<script>\n  import app from \"@/assets/scriptes/app\"\n  import Utils from \"@/assets/scriptes/utils\"\n  import types from \"@/vuex/types\"\n\n  export default {\n    name: \"access-token\",\n    created() {\n      const accessTokenCode = Utils.parseUrlParam(\"code\")\n//      console.log(accessTokenCode)\n//      if (accessTokenCode !== null && accessTokenCode !== \"\") {\n//      }\n\n      this.accessToken(accessTokenCode)\n    },\n    methods: {\n      accessToken(accessTokenCode){\n        this.$http.post(this.$basehost + \"/oauth/access_token\", {\n          \"client_id\": app.appId,\n          \"client_secret\": app.appSecret,\n          \"code\": \"http://localhost:8085/access/token?redirect=/\"\n        })\n          .then((authToken) => {\n            console.log(authToken)\n            this.$store.commit(types.oauth.updateAuthToken, authToken)\n            // 获取当前用户信息\n            this.getCurUser()\n          })\n      },\n\n      getCurUser() {\n        this.$http.get(this.$apihost + \"/user\")\n          .then((user) => {\n            this.$store.commit(types.oauth.updateCurUser, user)\n            this.redirect()\n          })\n      },\n\n      // 重定向\n      redirect() {\n        const redirectUri = this.$route.query.redirect\n        if (redirectUri !== undefined && typeof redirectUri !== 'undefined') {\n          this.$router.replace(redirectUri)\n        } else {\n          this.$router.replace(\"/\")\n        }\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// accessToken.vue?5ab3a1b2"],"sourceRoot":""}