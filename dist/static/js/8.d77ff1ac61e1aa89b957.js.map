{"version":3,"sources":["webpack:///static/js/8.d77ff1ac61e1aa89b957.js","webpack:///./src/pages/login/loginout.vue","webpack:///./src/pages/login/loginout.vue?9c29","webpack:///loginout.vue"],"names":["webpackJsonp","619","module","exports","__webpack_require__","Component","648","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","type","color","size","_v","staticRenderFns","664","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__vuex_types__","name","created","_this","$http","post","$basehost","then","resp","redirect","$store","getters","oauth","getRole","getCurShop","id","commit","updateAuthToken","updateCurUser","updateCurShop","$router","replace","path","query"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GCHjC,GAAAC,GAAAD,EAAA,KAEAA,EAAA,KAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAE,EAAAF,SDUMG,IACA,SAAUJ,EAAQC,GEtBxBD,EAAAC,SAAgBI,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,8BACGF,EAAA,OACHE,YAAA,yCACGF,EAAA,OACHE,YAAA,iBACGF,EAAA,cACHG,OACAC,KAAA,gBACAC,MAAA,UACAC,KAAA,OAEG,GAAAV,EAAAW,GAAA,KAAAP,EAAA,KACHE,YAAA,eACGN,EAAAW,GAAA,wBACFC,qBF4BKC,IACA,SAAUnB,EAAQoB,EAAqBlB,GAE7C,YACAmB,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,GAC7C,IACIC,IADqDtB,EAAoB,KAC7BA,EAAoB,IGpCzFkB,GAAA,SH0CEK,KGxCF,SHyCEC,QAAS,WGxCX,GAAAC,GAAApB,IH2CIA,MAAKqB,MAAMC,KAAKtB,KAAKuB,UG1CzB,WAAAC,KAAA,SAAAC,GH2CM,GAAIC,GGxCV,EH0CmB,UADFN,EAAMO,OAAOC,QAAQX,EAA2D,EAAEY,MGxCnGC,SH2CQJ,EAAW,SADGN,EAAMO,OAAOC,QAAQX,EAA2D,EAAEY,MGxCxGE,YACAC,GH0CQN,EGxCR,QH2CMN,GAAMO,OAAOM,OAAOhB,EAA2D,EAAEY,MAAMK,gBGxC7F,IHyCMd,EAAMO,OAAOM,OAAOhB,EAA2D,EAAEY,MAAMM,cGxC7F,MHyCMf,EAAMO,OAAOM,OAAOhB,EAA2D,EAAEY,MAAMO,cGvC7F,MHyCMhB,EAAMiB,QAAQC,SACZC,KGxCR,SHyCQC,OAASd,SGvCjBA","file":"static/js/8.d77ff1ac61e1aa89b957.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 619:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(226)(\n  /* script */\n  __webpack_require__(664),\n  /* template */\n  __webpack_require__(648),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 648:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"full-height valign-center\"\n  }, [_c('div', {\n    staticClass: \"align-center block-center font-light\"\n  }, [_c('div', {\n    staticClass: \"inline-block\"\n  }, [_c('mt-spinner', {\n    attrs: {\n      \"type\": \"double-bounce\",\n      \"color\": \"#bbbec4\",\n      \"size\": 28\n    }\n  })], 1), _vm._v(\" \"), _c('p', {\n    staticClass: \"margin-top\"\n  }, [_vm._v(\"正在登出系统，请稍候...\")])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 664:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__assets_scriptes_app__ = __webpack_require__(230);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vuex_types__ = __webpack_require__(60);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'logout',\n  created: function created() {\n    var _this = this;\n\n    this.$http.post(this.$basehost + '/logout').then(function (resp) {\n      var redirect = '';\n      var role = _this.$store.getters[__WEBPACK_IMPORTED_MODULE_1__vuex_types__[\"a\" /* default */].oauth.getRole];\n      if (role === 'USER') {\n        var curShop = _this.$store.getters[__WEBPACK_IMPORTED_MODULE_1__vuex_types__[\"a\" /* default */].oauth.getCurShop];\n        redirect = '/shop_' + curShop.id;\n      } else {\n        redirect = '/index';\n      }\n\n      _this.$store.commit(__WEBPACK_IMPORTED_MODULE_1__vuex_types__[\"a\" /* default */].oauth.updateAuthToken, '');\n      _this.$store.commit(__WEBPACK_IMPORTED_MODULE_1__vuex_types__[\"a\" /* default */].oauth.updateCurUser, null);\n      _this.$store.commit(__WEBPACK_IMPORTED_MODULE_1__vuex_types__[\"a\" /* default */].oauth.updateCurShop, null);\n\n      _this.$router.replace({\n        path: '/login',\n        query: { redirect: redirect }\n      });\n    });\n  }\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.d77ff1ac61e1aa89b957.js","var Component = require(\"!../../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./loginout.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7ba49e18\\\"}!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./loginout.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/loginout.vue\n// module id = 619\n// module chunks = 8","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"full-height valign-center\"\n  }, [_c('div', {\n    staticClass: \"align-center block-center font-light\"\n  }, [_c('div', {\n    staticClass: \"inline-block\"\n  }, [_c('mt-spinner', {\n    attrs: {\n      \"type\": \"double-bounce\",\n      \"color\": \"#bbbec4\",\n      \"size\": 28\n    }\n  })], 1), _vm._v(\" \"), _c('p', {\n    staticClass: \"margin-top\"\n  }, [_vm._v(\"正在登出系统，请稍候...\")])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-7ba49e18\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/loginout.vue\n// module id = 648\n// module chunks = 8","<template>\n  <div class='full-height valign-center'>\n    <div class='align-center block-center font-light'>\n      <div class='inline-block'>\n        <mt-spinner type='double-bounce' color='#bbbec4' :size='28'></mt-spinner>\n      </div>\n      <p class='margin-top'>正在登出系统，请稍候...</p>\n    </div>\n  </div>\n</template>\n\n<script>\n  import app from '@/assets/scriptes/app'\n  import MutationTypes from '@/vuex/types'\n  export default{\n    name: 'logout',\n    created: function () {\n      this.$http.post(this.$basehost + '/logout')\n        .then((resp) => {\n          // 获取重定向路径\n          let redirect = ''\n          const role = this.$store.getters[MutationTypes.oauth.getRole]\n          if(role === 'USER') {\n            const curShop = this.$store.getters[MutationTypes.oauth.getCurShop]\n            redirect = '/shop_' + curShop.id\n          } else {\n            redirect = '/index'\n          }\n          // 清理授权信息\n          this.$store.commit(MutationTypes.oauth.updateAuthToken, '')\n          this.$store.commit(MutationTypes.oauth.updateCurUser, null)\n          this.$store.commit(MutationTypes.oauth.updateCurShop, null)\n          // 重新登录\n          this.$router.replace({\n            path: '/login',\n            query: { redirect: redirect }\n          })\n        })\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// loginout.vue?cbb661a4"],"sourceRoot":""}